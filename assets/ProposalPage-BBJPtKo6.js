import{a as i,j as e,m as a,A as u,f as A,d as R}from"./framer-motion-B1hJR-WS.js";import{c as T}from"./confetti.module-oQXWb4Lk.js";import{a as E,u as B}from"./index-Dy0LjZnO.js";import{u as F}from"./useMediaQuery-Cx0W0o9P.js";import"./react-vendor-ulDWkZ6U.js";const S=[{id:1,question:"æˆ‘ä»¬çš„çºªå¿µæ—¥æ˜¯å“ªä¸€å¤©ï¼Ÿ",options:["2019å¹´6æœˆ20æ—¥","2019å¹´7æœˆ20æ—¥","2019å¹´8æœˆ20æ—¥","2020å¹´7æœˆ20æ—¥"],correctIndex:1,hint:"æ˜¯åœ¨ä¸ƒæœˆçš„ä¸€ä¸ªç‰¹åˆ«çš„æ—¥å­å“¦~",loveMessage:"é‚£ä¸ªå¤å¤©ï¼Œæ˜¯æˆ‘ä»¬æ•…äº‹å¼€å§‹çš„åœ°æ–¹"},{id:2,question:"æˆ‘ä»¬æ˜¯åœ¨å“ªé‡Œç›¸è¯†çš„ï¼Ÿ",options:["å¤§å­¦æ ¡å›­","æœ‹å‹ä»‹ç»","é«˜ä¸­æ ¡å›­","ç½‘ç»œ"],correctIndex:2,hint:"æƒ³æƒ³æˆ‘ä»¬é’æ¶©çš„å­¦ç”Ÿæ—¶ä»£~",loveMessage:"ä»é‚£æ—¶èµ·ï¼Œæˆ‘å°±çŸ¥é“ä½ æ˜¯ç‰¹åˆ«çš„"},{id:3,question:"æˆ‘ä»¬å¤§å­¦åœ¨å“ªä¸ªåŸå¸‚ï¼Ÿ",options:["ä¸Šæµ·","åŒ—äº¬","å¹¿å·","æ·±åœ³"],correctIndex:1,hint:"åœ¨ç¥–å›½çš„é¦–éƒ½ï¼Œæˆ‘ä»¬ä¸€èµ·è¿½é€æ¢¦æƒ³",loveMessage:"è¿™åº§åŸå¸‚è§è¯äº†æˆ‘ä»¬çš„æˆé•¿ä¸çˆ±æƒ…"},{id:4,question:"æˆ‘æœ€å–œæ¬¢å«ä½ ä»€ä¹ˆï¼Ÿ",options:["è€å©†","å®è´","æ€å®","äº²çˆ±çš„"],correctIndex:2,hint:"è¿™æ˜¯åªå±äºä½ çš„ä¸“å±ç§°å‘¼~",loveMessage:"æ€å®ï¼Œä½ æ˜¯æˆ‘å¿ƒä¸­ç‹¬ä¸€æ— äºŒçš„å­˜åœ¨"},{id:5,question:"æˆ‘ä»¬åœ¨ä¸€èµ·å¤šå°‘å¹´äº†ï¼Ÿ",options:["4å¹´","5å¹´","6å¹´","7å¹´"],correctIndex:3,hint:"ä»2019å¹´å¼€å§‹è®¡ç®—å“¦~",loveMessage:"ä¸ƒå¹´çš„æ—¶å…‰ï¼Œæ„Ÿè°¢ä½ ä¸€ç›´é™ªä¼´åœ¨æˆ‘èº«è¾¹"}],O=`äº²çˆ±çš„æ€å®ï¼š

ä»é«˜ä¸­æ ¡å›­çš„åˆæ¬¡ç›¸é‡
åˆ°åŒ—äº¬åŸé‡Œçš„ç›¸ä¾ç›¸ä¼´
ä¸ƒå¹´çš„æ—¶å…‰
åœ¨ä½ èº«è¾¹ï¼Œæ¯ä¸€å¤©éƒ½æ˜¯è¯—

ä½ æ˜¯æˆ‘é’æ˜¥é‡Œæœ€ç¾çš„é£æ™¯
æ˜¯æˆ‘ç”Ÿå‘½ä¸­æœ€åŠ¨äººçš„ç¯‡ç« 
æ˜¯æˆ‘æƒ³ç”¨ä¸€ç”Ÿæ¥çè—çš„è‡³å®

æ˜Ÿæ²³ç’€ç’¨ï¼Œä¸åŠä½ çœ¼ä¸­çš„å…‰èŠ’
å±±ç›Ÿæµ·èª“ï¼Œä¸åŠä¸ä½ ç›¸å®ˆçš„æ—¥å¸¸

ä»Šå¤©
æˆ‘æƒ³é—®ä½ ä¸€ä¸ªé—®é¢˜
è¿™ä¸ªé—®é¢˜
æˆ‘å·²ç»åœ¨å¿ƒé‡Œé—®äº†æ— æ•°é`,Q="äº²çˆ±çš„æ€æ€ï¼Œä½ æ„¿æ„å«ç»™æˆ‘å—ï¼Ÿ",H="â€”â€” æ°¸è¿œçˆ±ä½ çš„ç½—å…ˆç”Ÿ",Y=({onComplete:s})=>{const[t,o]=i.useState(0),[l,x]=i.useState(null),[n,m]=i.useState(!1),[c,f]=i.useState(!1),[k,M]=i.useState(0),y=S[t],p=g=>{x(g);const h=g===y.correctIndex;f(h),m(!0),h&&M(k+1),setTimeout(()=>{t<S.length-1?(o(t+1),x(null),m(!1)):setTimeout(s,1e3)},2e3)},j=(t+(n?1:0))/S.length*100;return e.jsxs(a.div,{className:"w-full max-w-lg mx-auto",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[e.jsxs(a.div,{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-elegant gradient-text mb-2",children:"çˆ±æƒ…é—®ç­”"}),e.jsx("p",{className:"text-white/50 text-sm",children:"çœ‹çœ‹ä½ æœ‰å¤šäº†è§£æˆ‘ä»¬çš„æ•…äº‹"})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex justify-between text-sm text-white/50 mb-2",children:[e.jsxs("span",{children:["é—®é¢˜ ",t+1,"/",S.length]}),e.jsxs("span",{children:["å¾—åˆ†: ",k]})]}),e.jsx("div",{className:"h-1.5 bg-white/[0.06] rounded-full overflow-hidden",children:e.jsx(a.div,{className:"h-full bg-gradient-to-r from-star-gold to-love-pink rounded-full",initial:{width:0},animate:{width:`${j}%`},transition:{duration:.5}})})]}),e.jsx(u,{mode:"wait",children:e.jsxs(a.div,{className:"bg-white/[0.03] backdrop-blur-xl border border-white/[0.08] rounded-3xl shadow-[0_8px_40px_rgba(0,0,0,0.2)] p-6 md:p-8",initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},children:[e.jsxs("h3",{className:"text-xl md:text-2xl text-white font-medium mb-8 text-center",children:[e.jsxs("span",{className:"text-love-pink mr-2",children:["Q",t+1,"."]}),y.question]}),e.jsx("div",{className:"space-y-3",children:y.options.map((g,h)=>{const v=l===h,b=h===y.correctIndex,I=n&&(v||b);return e.jsx(a.button,{className:`w-full p-4 rounded-2xl text-left transition-all duration-300 ${n?b?"bg-green-500/20 border-2 border-green-500":v?"bg-red-500/20 border-2 border-red-500":"bg-white/[0.06] backdrop-blur-sm border-2 border-white/[0.08]":v?"bg-star-gold/20 border-2 border-star-gold":"bg-white/[0.06] backdrop-blur-sm border-2 border-white/[0.08] hover:bg-white/[0.12] hover:border-love-pink/30"}`,onClick:()=>!n&&p(h),disabled:n,whileHover:n?{}:{scale:1.02},whileTap:n?{}:{scale:.98},children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${I?b?"bg-green-500 text-white":"bg-red-500 text-white":"bg-white/10 text-white/60"}`,children:String.fromCharCode(65+h)}),e.jsx("span",{className:"text-white/90",children:g}),n&&b&&e.jsx(a.span,{className:"ml-auto text-green-400",initial:{scale:0},animate:{scale:1},children:"âœ“"}),n&&v&&!b&&e.jsx(a.span,{className:"ml-auto text-red-400",initial:{scale:0},animate:{scale:1},children:"âœ—"})]})},h)})}),e.jsx(u,{children:n&&e.jsx(a.div,{className:`mt-6 p-4 rounded-2xl text-center ${c?"bg-green-500/10":"bg-love-pink/10"}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0},children:c?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-green-400 font-medium mb-1",children:"ç­”å¯¹äº†ï¼"}),e.jsx("p",{className:"text-white/60 text-sm",children:y.loveMessage})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-love-pink font-medium mb-1",children:"å†æƒ³æƒ³~"}),e.jsx("p",{className:"text-white/60 text-sm",children:y.hint})]})})})]},t)})]})},w=["äº²çˆ±çš„æ€å®ï¼š","ä»é«˜ä¸­æ ¡å›­çš„åˆæ¬¡ç›¸é‡","åˆ°åŒ—äº¬åŸé‡Œçš„ç›¸ä¾ç›¸ä¼´","ä¸ƒå¹´çš„æ—¶å…‰","åœ¨ä½ èº«è¾¹ï¼Œæ¯ä¸€å¤©éƒ½æ˜¯è¯—","ä½ æ˜¯æˆ‘é’æ˜¥é‡Œæœ€ç¾çš„é£æ™¯","æ˜¯æˆ‘ç”Ÿå‘½ä¸­æœ€åŠ¨äººçš„ç¯‡ç« ","æ˜¯æˆ‘æƒ³ç”¨ä¸€ç”Ÿæ¥çè—çš„è‡³å®"],V=({onComplete:s})=>{const[t,o]=i.useState([]),[l]=i.useState(()=>Array.from({length:w.length},(m,c)=>({id:c,x:20+Math.random()*60,y:20+Math.random()*60,delay:Math.random()*2}))),x=m=>{if(t.includes(m))return;const c=[...t,m];o(c),c.length===w.length&&setTimeout(s,2e3)},n=t.length/w.length*100;return e.jsxs(a.div,{className:"w-full max-w-lg mx-auto",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[e.jsxs(a.div,{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-elegant gradient-text mb-2",children:"æ˜Ÿå…‰æƒ…ä¹¦"}),e.jsx("p",{className:"text-white/50 text-sm",children:"ç‚¹å‡»æ˜Ÿæ˜Ÿï¼Œæ­å¼€æˆ‘å†™ç»™ä½ çš„è¯"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between text-sm text-white/50 mb-2",children:[e.jsxs("span",{children:["å·²æ­ç¤º ",t.length,"/",w.length]}),e.jsx("span",{children:"æ”¶é›†æ˜Ÿå…‰"})]}),e.jsx("div",{className:"h-1.5 bg-white/[0.06] rounded-full overflow-hidden",children:e.jsx(a.div,{className:"h-full bg-gradient-to-r from-star-gold to-love-pink rounded-full",animate:{width:`${n}%`},transition:{duration:.5}})})]}),e.jsxs("div",{className:"relative glass rounded-3xl p-6 md:p-8 min-h-[380px] overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-night-700/50 to-night-900/50"}),l.map((m,c)=>e.jsx(a.button,{className:`absolute z-10 ${t.includes(c)?"pointer-events-none":"cursor-pointer"}`,style:{left:`${m.x}%`,top:`${m.y}%`},onClick:()=>x(c),initial:{scale:0},animate:{scale:t.includes(c)?0:[1,1.2,1],opacity:t.includes(c)?0:1},transition:{scale:{duration:2,repeat:1/0,delay:m.delay}},whileHover:{scale:1.5},whileTap:{scale:.8},children:e.jsx("span",{className:"text-3xl md:text-4xl filter drop-shadow-lg",children:t.includes(c)?"":"âœ¦"})},m.id)),e.jsx("div",{className:"relative z-0 space-y-4 text-center",children:w.map((m,c)=>e.jsx(u,{children:t.includes(c)?e.jsx(a.p,{className:`text-lg md:text-xl ${c===0?"text-star-gold font-elegant text-2xl":"text-white/90"}`,initial:{opacity:0,y:20,filter:"blur(10px)"},animate:{opacity:1,y:0,filter:"blur(0px)"},transition:{duration:.8},children:m}):e.jsx("p",{className:"text-lg md:text-xl text-white/10 select-none",children:"â—".repeat(m.length/2)})},c))}),t.length===w.length&&e.jsx(a.div,{className:"absolute inset-0 flex items-center justify-center bg-night-900/60 rounded-3xl",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:e.jsxs(a.div,{className:"text-center",initial:{scale:0},animate:{scale:1},transition:{type:"spring",delay:.8},children:[e.jsx("span",{className:"text-6xl block mb-4",children:"ğŸ’Œ"}),e.jsx("p",{className:"text-2xl text-star-gold font-elegant",children:"æƒ…ä¹¦å·²å®Œæ•´æ­ç¤º"}),e.jsx("p",{className:"text-white/60 mt-2",children:"å‡†å¤‡å¥½è¿æ¥æœ€åçš„æƒŠå–œäº†å—ï¼Ÿ"})]})})]}),e.jsx(a.p,{className:"text-center text-white/40 text-sm mt-4",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:t.length<w.length?`è¿˜æœ‰ ${w.length-t.length} é¢—æ˜Ÿæ˜Ÿç­‰å¾…ç‚¹äº®`:"æ‰€æœ‰æ˜Ÿæ˜Ÿéƒ½å·²ç‚¹äº® âœ¨"})]})},N=O.split(`
`).map(s=>s.trim()).filter(Boolean),W=(s,t)=>s===0?1500:s>=t-3?3e3:2200,P=s=>{try{navigator?.vibrate?.(s)}catch{}},D=["ğŸŒ¸","ğŸŒ¹","ğŸª·","ğŸ’®","ğŸµï¸"],X=["â¤ï¸","ğŸ’•","ğŸŒ¹","ğŸ’–","ğŸŒ¸","ğŸ’—","âœ¨"];function J(s){return Array.from({length:s},()=>({left:Math.random()*100,size:Math.random()*4+2,duration:Math.random()*6+8}))}function U(s){return Array.from({length:s},()=>({left:Math.random()*100,size:Math.random()*16+12,duration:Math.random()*6+8,xDrift:Math.random()*80-40,direction:Math.random()>.5?1:-1,emoji:D[Math.floor(Math.random()*D.length)]}))}function Z(s){return Array.from({length:s},()=>({left:Math.random()*100,fontSize:Math.random()*18+14,yDrift:Math.random()*100-50,duration:Math.random()*5+6,delay:Math.random()*4,emoji:X[Math.floor(Math.random()*X.length)]}))}const K=i.memo(({data:s,delay:t})=>e.jsx(a.div,{className:"fixed pointer-events-none rounded-full bg-star-gold",style:{left:`${s.left}%`,top:-10,width:s.size,height:s.size},animate:{y:["0vh","105vh"],x:[0,Math.sin(s.left)*60],opacity:[0,1,1,0]},transition:{duration:s.duration,repeat:1/0,delay:t,ease:"linear"}})),ee=i.memo(({data:s,delay:t})=>e.jsx(a.div,{className:"fixed pointer-events-none",style:{left:`${s.left}%`,top:-20,fontSize:s.size},animate:{y:["0vh","105vh"],x:[0,s.xDrift],rotate:[0,360*s.direction],opacity:[0,.8,.8,0]},transition:{duration:s.duration,repeat:1/0,delay:t,ease:"linear"},children:s.emoji})),te=i.memo(({onComplete:s})=>{const t=i.useMemo(()=>Array.from({length:28},(l,x)=>{const n=x/28*2*Math.PI,m=16*Math.pow(Math.sin(n),3),c=-(13*Math.cos(n)-5*Math.cos(2*n)-2*Math.cos(3*n)-Math.cos(4*n));return{x:m*8+200,y:c*8+200}}),[]),o=i.useMemo(()=>[[0,14],[4,18],[7,21],[10,24],[3,25],[6,22]],[]);return i.useEffect(()=>{P(100);const l=setTimeout(s,4500);return()=>clearTimeout(l)},[s]),e.jsx(a.div,{className:"flex items-center justify-center min-h-[60vh]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,scale:1.3,filter:"blur(8px)",transition:{duration:.8}},children:e.jsxs("svg",{width:"400",height:"400",viewBox:"0 0 400 400",className:"max-w-[80vw]",children:[e.jsxs("defs",{children:[e.jsxs("radialGradient",{id:"heartGlow",children:[e.jsx("stop",{offset:"0%",stopColor:"rgba(255,105,180,0.5)"}),e.jsx("stop",{offset:"50%",stopColor:"rgba(255,105,180,0.15)"}),e.jsx("stop",{offset:"100%",stopColor:"transparent"})]}),e.jsxs("radialGradient",{id:"starGlow",children:[e.jsx("stop",{offset:"0%",stopColor:"rgba(255,215,0,0.9)"}),e.jsx("stop",{offset:"100%",stopColor:"rgba(255,215,0,0)"})]}),e.jsxs("filter",{id:"softGlow",children:[e.jsx("feGaussianBlur",{stdDeviation:"2",result:"blur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"blur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),e.jsx(a.circle,{cx:"200",cy:"180",r:"90",fill:"url(#heartGlow)",initial:{opacity:0},animate:{opacity:[0,.6,.3]},transition:{duration:2.5,delay:2}}),t.map((l,x)=>{const n=t[(x+1)%t.length];return e.jsx(a.line,{x1:l.x,y1:l.y,x2:n.x,y2:n.y,stroke:"rgba(255,182,193,0.6)",strokeWidth:"1.5",filter:"url(#softGlow)",initial:{pathLength:0,opacity:0},animate:{pathLength:1,opacity:1},transition:{duration:.12,delay:x*.1+.4}},`line-${x}`)}),o.map(([l,x],n)=>e.jsx(a.line,{x1:t[l].x,y1:t[l].y,x2:t[x].x,y2:t[x].y,stroke:"rgba(255,215,0,0.2)",strokeWidth:"0.8",strokeDasharray:"4 4",initial:{pathLength:0,opacity:0},animate:{pathLength:1,opacity:1},transition:{duration:.5,delay:2.8+n*.15}},`cross-${n}`)),t.map((l,x)=>e.jsxs("g",{children:[e.jsx(a.circle,{cx:l.x,cy:l.y,r:"8",fill:"url(#starGlow)",initial:{scale:0,opacity:0},animate:{scale:[0,1.2,.8],opacity:[0,.5,.3]},transition:{duration:.6,delay:x*.1}}),e.jsx(a.circle,{cx:l.x,cy:l.y,r:"3.5",fill:"#ffd700",filter:"url(#softGlow)",initial:{scale:0,opacity:0},animate:{scale:[0,1.5,1],opacity:[0,1,.9]},transition:{duration:.5,delay:x*.1}})]},`star-${x}`)),e.jsx(a.text,{x:"200",y:"190",textAnchor:"middle",fill:"rgba(255,182,193,0.8)",fontSize:"16",fontFamily:"'Ma Shan Zheng', cursive",initial:{opacity:0},animate:{opacity:[0,1]},transition:{delay:3.5,duration:.8},children:"â¤"})]})})}),ae=i.memo(()=>e.jsxs(a.div,{className:"relative mx-auto mb-8 w-52 md:w-64",initial:{opacity:0,y:40,scale:.9},animate:{opacity:1,y:0,scale:1},transition:{type:"spring",duration:1.2},children:[e.jsx("div",{className:"absolute -inset-6 bg-gradient-to-br from-love-pink/15 via-star-gold/10 to-love-rose/15 rounded-2xl blur-2xl"}),e.jsxs("div",{className:"relative bg-white/95 p-2.5 pb-10 rounded-lg shadow-2xl shadow-love-pink/25",children:[e.jsx("div",{className:"overflow-hidden rounded",children:e.jsx("img",{src:E("/images/hero/poster.webp"),alt:"æˆ‘ä»¬çš„ç…§ç‰‡",className:"w-full aspect-[3/4] object-cover"})}),e.jsx(a.p,{className:"absolute bottom-2.5 left-0 right-0 text-center text-sm text-gray-500 font-elegant italic",initial:{opacity:0},animate:{opacity:1},transition:{delay:1},children:"æˆ‘æœ€çè´µçš„äºº â™¥"})]})]})),se=i.memo(({onOpen:s})=>{const[t,o]=i.useState(!1),l=()=>{o(!0),P([50,50,100]),setTimeout(s,1500)};return e.jsxs(a.div,{className:"flex flex-col items-center",initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},transition:{type:"spring"},style:{perspective:800},children:[e.jsxs(a.div,{className:"relative w-32 h-32 md:w-40 md:h-40 cursor-pointer",onClick:l,whileHover:t?{}:{scale:1.05,rotateY:5},whileTap:t?{}:{scale:.95},style:{transformStyle:"preserve-3d"},children:[e.jsx(a.div,{className:"absolute -bottom-2 left-1/2 -translate-x-1/2 w-24 h-4 md:w-32 md:h-5 rounded-[50%] bg-black/30 blur-md",animate:t?{scale:1.2,opacity:.5}:{scale:1,opacity:.3},transition:{duration:.5}}),e.jsx("div",{className:"absolute bottom-0 left-1/2 -translate-x-1/2 w-28 h-16 md:w-36 md:h-20 bg-gradient-to-b from-rose-900 to-rose-950 rounded-b-lg border-2 border-rose-800 flex items-center justify-center shadow-lg shadow-rose-950/50",children:e.jsx("div",{className:"w-24 h-12 md:w-32 md:h-16 bg-gradient-to-b from-rose-100 to-rose-50 rounded-b-sm flex items-center justify-center",children:e.jsx(a.div,{className:"text-4xl md:text-5xl",animate:t?{y:[-10,-30],scale:[1,1.3],opacity:1}:{y:0,scale:1,opacity:t?1:.3},transition:{type:"spring",delay:.5},children:"ğŸ’"})})}),e.jsx(a.div,{className:"absolute bottom-14 md:bottom-[4.5rem] left-1/2 -translate-x-1/2 w-28 h-10 md:w-36 md:h-12 bg-gradient-to-b from-rose-800 to-rose-900 rounded-t-lg border-2 border-b-0 border-rose-700 origin-bottom shadow-md",animate:t?{rotateX:-120,y:-20}:{rotateX:0},transition:{type:"spring",stiffness:80},style:{transformStyle:"preserve-3d"}}),t&&e.jsx(a.div,{className:"absolute bottom-8 left-1/2 -translate-x-1/2 w-20 h-20 rounded-full",initial:{opacity:0,scale:0},animate:{opacity:[0,.8,.4],scale:[0,2,1.5]},transition:{duration:1.5,delay:.3},style:{background:"radial-gradient(circle, rgba(255,215,0,0.6), transparent)"}})]}),!t&&e.jsx(a.p,{className:"text-white/50 text-sm mt-4",animate:{opacity:[.3,.8,.3]},transition:{duration:2,repeat:1/0},children:"è½»è§¦æ‰“å¼€ âœ¨"})]})}),ie=()=>{const s=F(),[t,o]=i.useState("constellation"),[l,x]=i.useState(0),[n,m]=i.useState(!1),c=i.useRef(null),f=i.useRef(null),k=i.useMemo(()=>J(s?5:8),[s]),M=i.useMemo(()=>U(s?8:15),[s]),y=i.useMemo(()=>Z(s?15:25),[s]),p=i.useCallback(()=>{f.current&&f.current.scrollIntoView({behavior:"smooth",block:"center"})},[]);i.useEffect(()=>{if(t!=="text")return;let r=0,d;const C=()=>{if(r++,x(r),setTimeout(p,100),r>=N.length){setTimeout(()=>o("ring"),2500);return}const z=W(r,N.length);d=setTimeout(C,z)};return d=setTimeout(C,1500),()=>clearTimeout(d)},[t,p]);const j=i.useCallback(()=>{o("photo"),setTimeout(()=>o("text"),2500)},[]),g=i.useCallback(()=>{o("question")},[]),h=i.useCallback(()=>{m(!0),o("celebration"),P([100,50,100,50,200]);const r=s?5e3:8e3,d=Date.now()+r,C=s?2:4,z=s?100:200,q=()=>{T({particleCount:C,angle:60,spread:55,origin:{x:0,y:.7},colors:["#ff69b4","#ff1493","#ffd700","#ffb6c1","#ff6b9d"]}),T({particleCount:C,angle:120,spread:55,origin:{x:1,y:.7},colors:["#ff69b4","#ff1493","#ffd700","#ffb6c1","#ff6b9d"]}),Date.now()<d&&requestAnimationFrame(q)};q(),(s?[0,600,1500]:[0,500,1200,2e3,3e3]).forEach(L=>{setTimeout(()=>{T({particleCount:z,spread:120,origin:{x:.5,y:.4+Math.random()*.3},colors:["#ff69b4","#ff1493","#ffd700","#ffb6c1","#fff","#ff6b9d"],gravity:.8,scalar:1.2})},L)})},[s]),v=A(0),b=A(0),I=R(v,r=>r-100),_=R(b,r=>r-100),G=i.useCallback(r=>{v.set(r.clientX),b.set(r.clientY)},[v,b]);return e.jsxs("div",{ref:c,className:"w-full max-w-xl mx-auto text-center relative flex flex-col items-center",onMouseMove:G,children:[!s&&e.jsx(a.div,{className:"fixed w-[200px] h-[200px] rounded-full pointer-events-none z-0",style:{x:I,y:_,background:"radial-gradient(circle, rgba(255,182,193,0.08), transparent 70%)"}}),t!=="constellation"&&e.jsxs(e.Fragment,{children:[k.map((r,d)=>e.jsx(K,{data:r,delay:d*.8},`star-${d}`)),t==="celebration"&&M.map((r,d)=>e.jsx(ee,{data:r,delay:d*.4},`petal-${d}`))]}),e.jsx(u,{mode:"wait",children:t==="constellation"&&e.jsx(te,{onComplete:j})}),e.jsx(u,{children:t!=="constellation"&&e.jsx(ae,{})}),t!=="constellation"&&(t==="text"||t==="ring"||t==="question"||t==="celebration")&&e.jsxs(a.div,{className:"flex items-center justify-center gap-3 my-6",initial:{opacity:0,scaleX:0},animate:{opacity:1,scaleX:1},transition:{duration:.8,delay:.3},children:[e.jsx("div",{className:"h-px w-16 bg-gradient-to-r from-transparent to-star-gold/30"}),e.jsx("span",{className:"text-star-gold/40 text-sm",children:"âœ¦"}),e.jsx("div",{className:"h-px w-16 bg-gradient-to-l from-transparent to-star-gold/30"})]}),e.jsx(u,{children:(t==="text"||t==="ring"||t==="question"||t==="celebration")&&e.jsxs(a.div,{ref:f,className:"relative mb-10 flex flex-col items-center gap-5 px-2",initial:{opacity:0},animate:{opacity:1},children:[N.map((r,d)=>e.jsx(u,{children:d<l&&e.jsxs(a.div,{className:`rounded-2xl px-7 py-5 md:px-10 md:py-6 max-w-md w-full relative overflow-hidden text-center ${d===0?"bg-gradient-to-b from-star-gold/[0.08] to-transparent border border-star-gold/20 shadow-[0_0_30px_rgba(255,215,0,0.06)]":d>=N.length-3?"bg-gradient-to-b from-love-pink/[0.07] to-transparent border border-love-pink/15 shadow-[0_0_30px_rgba(255,105,180,0.05)]":"bg-white/[0.03] backdrop-blur-lg border border-white/[0.08]"}`,initial:{opacity:0,y:30,scale:.92},animate:{opacity:1,y:0,scale:1},transition:{type:"spring",stiffness:120,damping:14},children:[e.jsx("div",{className:`absolute top-0 left-[20%] right-[20%] h-px ${d===0?"bg-gradient-to-r from-transparent via-star-gold/40 to-transparent":d>=N.length-3?"bg-gradient-to-r from-transparent via-love-pink/30 to-transparent":"bg-gradient-to-r from-transparent via-white/10 to-transparent"}`}),e.jsx("p",{className:`text-center leading-relaxed tracking-wide ${d===0?"text-star-gold font-elegant text-xl md:text-2xl":d>=N.length-3?"text-white font-medium text-lg md:text-xl":"text-white/80 font-light text-base md:text-lg"}`,children:r}),e.jsx("div",{className:`absolute bottom-0 left-[25%] right-[25%] h-px ${d===0?"bg-gradient-to-r from-transparent via-star-gold/20 to-transparent":d>=N.length-3?"bg-gradient-to-r from-transparent via-love-pink/15 to-transparent":""}`})]})},d)),l>0&&l<N.length&&t==="text"&&e.jsx(a.div,{className:"flex justify-center gap-2",animate:{opacity:[.2,.6,.2]},transition:{duration:2.5,repeat:1/0},children:[0,1,2].map(r=>e.jsx(a.div,{className:"w-1 h-1 rounded-full bg-star-gold/40",animate:{y:[0,-5,0]},transition:{duration:.8,delay:r*.2,repeat:1/0}},r))})]})}),e.jsx(u,{children:t==="ring"&&e.jsx(se,{onOpen:g})}),e.jsx(u,{children:t==="question"&&!n&&e.jsxs(a.div,{className:"fixed inset-0 z-30 flex flex-col items-center justify-center px-6",initial:{opacity:0},animate:{opacity:1},transition:{duration:.8},children:[e.jsx("div",{className:"absolute inset-0 bg-night-900/80 backdrop-blur-sm"}),e.jsxs(a.div,{className:"relative z-10 flex flex-col items-center",initial:{scale:.7,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:80,delay:.3},children:[e.jsx(a.h2,{className:"text-4xl md:text-6xl lg:text-7xl font-elegant mb-12 text-center leading-tight",style:{background:"linear-gradient(135deg, #ffd700, #ff69b4, #ffd700)",backgroundClip:"text",WebkitBackgroundClip:"text",color:"transparent",backgroundSize:"200% 200%"},animate:{backgroundPosition:["0% 50%","100% 50%","0% 50%"]},transition:{duration:4,repeat:1/0},children:Q}),e.jsxs(a.button,{className:"group relative px-14 py-5 rounded-full text-white text-xl font-bold overflow-hidden",onClick:h,whileHover:{scale:1.08},whileTap:{scale:.95},children:[e.jsx(a.div,{className:"absolute inset-0 bg-gradient-to-r from-love-pink via-love-rose to-star-gold",animate:{backgroundPosition:["0% 50%","100% 50%","0% 50%"]},style:{backgroundSize:"200% 100%"},transition:{duration:3,repeat:1/0}}),e.jsx(a.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent",animate:{x:["-100%","100%"]},transition:{duration:2,repeat:1/0,repeatDelay:1}}),e.jsx(a.div,{className:"absolute -inset-1 rounded-full opacity-50 blur-md",animate:{background:["linear-gradient(to right, rgba(255,105,180,0.5), rgba(255,215,0,0.5))","linear-gradient(to right, rgba(255,215,0,0.5), rgba(255,105,180,0.5))"]},transition:{duration:2,repeat:1/0,repeatType:"reverse"}}),e.jsxs("span",{className:"relative flex items-center gap-3 z-10",children:[e.jsx(a.span,{animate:{scale:[1,1.3,1]},transition:{duration:.8,repeat:1/0},children:"ğŸ’"}),"æˆ‘æ„¿æ„",e.jsx(a.span,{animate:{scale:[1,1.3,1]},transition:{duration:.8,repeat:1/0,delay:.4},children:"â¤ï¸"})]})]})]})]})}),e.jsx(u,{children:t==="celebration"&&e.jsxs(a.div,{className:"flex flex-col items-center",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:[e.jsx(a.div,{className:"text-6xl md:text-8xl mb-6",initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:100,delay:.3},children:"ğŸ’•"}),e.jsx(a.h2,{className:"text-3xl md:text-5xl font-elegant gradient-text mb-3 text-center",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.8,duration:.8},children:"è°¢è°¢ä½ ï¼Œæˆ‘çš„æ€å®"}),e.jsx(a.p,{className:"text-xl md:text-2xl text-white/80 mb-5 text-center",initial:{opacity:0},animate:{opacity:1},transition:{delay:1.3},children:"ä½™ç”Ÿè¯·å¤šæŒ‡æ•™"}),e.jsxs(a.div,{className:"flex items-center justify-center gap-2 mb-5",initial:{scaleX:0,opacity:0},animate:{scaleX:1,opacity:1},transition:{delay:1.6,duration:.8},children:[e.jsx("div",{className:"h-px w-10 bg-gradient-to-r from-transparent to-star-gold/50"}),e.jsx("span",{className:"text-star-gold/50 text-xs",children:"âœ¦"}),e.jsx("div",{className:"h-px w-10 bg-gradient-to-l from-transparent to-star-gold/50"})]}),e.jsx(a.p,{className:"text-lg text-star-gold font-elegant text-center",initial:{opacity:0},animate:{opacity:1},transition:{delay:1.8},children:H}),e.jsx(a.p,{className:"text-sm text-white/30 mt-6 tracking-[0.2em] text-center",initial:{opacity:0},animate:{opacity:1},transition:{delay:2.5},children:"2019.07.20 â€” forever"}),e.jsx(a.button,{className:"mt-8 px-6 py-2 rounded-full border border-white/10 text-white/40 text-sm hover:text-white/70 hover:border-white/30 transition-all",initial:{opacity:0},animate:{opacity:1},transition:{delay:4},onClick:()=>{o("constellation"),x(0),m(!1)},children:"å†çœ‹ä¸€æ¬¡ â†»"}),y.map((r,d)=>e.jsx(a.div,{className:"fixed pointer-events-none",style:{left:`${r.left}%`,top:-30,fontSize:`${r.fontSize}px`},animate:{y:["0vh","110vh"],x:[0,r.yDrift],rotate:[0,360]},transition:{duration:r.duration,repeat:1/0,delay:r.delay,ease:"linear"},children:r.emoji},d))]})})]})},$=[{id:"quiz",title:"çˆ±æƒ…é—®ç­”",icon:"â“"},{id:"letter",title:"æ˜Ÿå…‰æƒ…ä¹¦",icon:"ğŸ’Œ"},{id:"proposal",title:"çˆ±çš„å‘Šç™½",icon:"ğŸ’"}],xe=()=>{const{gameProgress:s,completeStage:t}=B(),[o,l]=i.useState(()=>s.quizCompleted?s.letterCompleted?"proposal":"letter":"quiz"),[x,n]=i.useState(!1),[m,c]=i.useState(!1),f=i.useRef([]),k=i.useCallback(()=>{const p=Date.now();f.current.push(p),f.current=f.current.filter(j=>p-j<2e3),f.current.length>=5&&(c(!0),f.current=[])},[]),M=p=>{n(!0),p==="quiz"?(t("quizCompleted"),setTimeout(()=>{l("letter"),n(!1)},1e3)):p==="letter"&&(t("letterCompleted"),setTimeout(()=>{l("proposal"),n(!1)},1e3))},y=()=>$.findIndex(p=>p.id===o);return e.jsxs("div",{className:"min-h-screen w-full py-24 md:py-32 px-4 sm:px-6 md:px-8 relative overflow-hidden",children:[e.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0",children:[e.jsx("div",{className:"absolute top-1/4 left-1/2 -translate-x-1/2 w-[600px] h-[600px] rounded-full bg-love-pink/[0.04] blur-[120px]"}),e.jsx("div",{className:"absolute bottom-1/4 left-1/2 -translate-x-1/2 w-[400px] h-[400px] rounded-full bg-star-gold/[0.03] blur-[100px]"})]}),e.jsxs("div",{className:"max-w-4xl mx-auto relative z-10",children:[e.jsxs(a.div,{className:"text-center mb-10",initial:{opacity:0,y:30},animate:{opacity:1,y:0},children:[e.jsxs(a.div,{className:"flex items-center justify-center gap-3 mb-4",initial:{opacity:0,scaleX:0},animate:{opacity:1,scaleX:1},transition:{delay:.2,duration:.8},children:[e.jsx("div",{className:"h-px w-12 bg-gradient-to-r from-transparent to-star-gold/40"}),e.jsx("span",{className:"text-star-gold/40 text-xs",children:"âœ¦"}),e.jsx("div",{className:"h-px w-12 bg-gradient-to-l from-transparent to-star-gold/40"})]}),e.jsx("h1",{className:"text-4xl md:text-5xl font-elegant gradient-text mb-3",children:"çˆ±çš„å‘Šç™½"}),e.jsxs(a.div,{className:"flex items-center justify-center gap-3 mt-2",initial:{opacity:0,scaleX:0},animate:{opacity:1,scaleX:1},transition:{delay:.4,duration:.8},children:[e.jsx("div",{className:"h-px w-8 bg-gradient-to-r from-transparent to-love-pink/30"}),e.jsx("span",{className:"text-love-pink/30 text-[10px]",children:"â™¥"}),e.jsx("div",{className:"h-px w-8 bg-gradient-to-l from-transparent to-love-pink/30"})]})]}),o!=="proposal"&&e.jsx(a.div,{className:"flex justify-center items-center gap-2 md:gap-4 mb-12",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},children:$.map((p,j)=>{const g=p.id===o,h=j<y();return e.jsxs("div",{className:"flex items-center",children:[e.jsxs(a.div,{className:`flex flex-col items-center ${g?"opacity-100":h?"opacity-80":"opacity-30"}`,animate:g?{scale:[1,1.1,1]}:{},transition:{duration:1,repeat:g?1/0:0},children:[e.jsx("div",{className:`w-10 h-10 md:w-12 md:h-12 rounded-full flex items-center justify-center text-lg md:text-xl ${h?"bg-green-500/20 border-2 border-green-500":g?"bg-star-gold/20 border-2 border-star-gold":"bg-white/5 border-2 border-white/20"}`,children:h?"âœ“":p.icon}),e.jsx("span",{className:"text-xs mt-2 hidden md:block text-white/60",children:p.title})]}),j<$.length-1&&e.jsx("div",{className:`w-8 md:w-16 h-0.5 mx-2 ${h?"bg-green-500":"bg-white/20"}`})]},p.id)})}),e.jsx(u,{mode:"wait",children:x&&e.jsxs(a.div,{className:"flex flex-col items-center justify-center py-20",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[e.jsx(a.div,{className:"text-5xl",animate:{scale:[1,1.2,1],rotate:[0,10,-10,0]},transition:{duration:.5,repeat:1/0},children:"ğŸ’•"}),e.jsx("p",{className:"text-white/60 mt-4",children:"å‡†å¤‡ä¸‹ä¸€ä¸ªæŒ‘æˆ˜..."})]},"transition")}),e.jsx(u,{mode:"wait",children:!x&&e.jsxs(a.div,{className:"flex flex-col items-center w-full",initial:{opacity:0,y:30},animate:{opacity:1,y:0},exit:{opacity:0,y:-30},transition:{duration:.5},children:[o==="quiz"&&e.jsx(Y,{onComplete:()=>M("quiz")}),o==="letter"&&e.jsx(V,{onComplete:()=>M("letter")}),o==="proposal"&&e.jsx(ie,{})]},o)}),o!=="proposal"&&e.jsxs("div",{className:"text-center mt-12",children:[e.jsx("div",{className:"h-10 cursor-default select-none",onClick:k}),e.jsx(u,{children:m&&e.jsx(a.button,{className:"text-white/30 text-sm hover:text-white/50 transition-colors",initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0},onClick:()=>{o==="quiz"?(t("quizCompleted"),l("letter")):o==="letter"&&(t("letterCompleted"),l("proposal")),c(!1)},children:"è·³è¿‡æ­¤å…³ â†’"})})]})]})]})};export{xe as default};
